import{m,_ as a}from"./vendor.21c2b6f5.js";import{d as u}from"./vuedraggable.umd.700457d3.js";import{C as c}from"./ConfirmationModal.41eb8e05.js";import{I as d}from"./InputGroup.548575c6.js";import{n as i}from"./LogoLight.eb2f8316.js";const h={name:"MenuItemModal",mixins:[m],components:{InputGroup:d},props:{isCreate:{default:!0,type:Boolean},menuItem:{default:()=>({custom_class:"",child_items:[],href:"",label:"",rel:"",target:""})},resetOnClose:{default:!1,type:Boolean},showModal:{default:!0,type:Boolean}},data(){return{defaultMenuItem:{custom_class:"",child_items:[],href:"",label:"",rel:"",target:""},editableMenuItem:{custom_class:"",child_items:[],href:"",label:"",rel:"",target:""}}},computed:{confirmText(){return this.isCreate?"Add":"Update"},isMenuItemValid(){try{return this.editableMenuItem.label.length}catch{return!1}},headerText(){return this.isCreate?"Add Menu Item":"Update Menu Item"}},methods:{cancelAction(){this.$emit("cancelAction")},closeModal(){this.$emit("closeModal")},confirmAction(n=!0){if(!this.isMenuItemValid){n&&this.$errorToast("Menu item data is invalid.");return}this.$emit("confirmAction",this.editableMenuItem),this.editableMenuItem=a.cloneDeep(this.defaultMenuItem)},onMenuItemChange(){this.editableMenuItem=a.cloneDeep(this.menuItem);try{a.forEach(this.defaultMenuItem,(n,e)=>{this.editableMenuItem.hasOwnProperty(e)||this.$set(this.editableMenuItem,e,this.defaultMenuItem[e])})}catch{this.editableMenuItem=a.cloneDeep(defaultMenuItem)}},onShowModal(){try{let n=document.getElementsByTagName("body")[0];this.showModal?n.classList.add("overflow-y-hidden"):(n.classList.remove("overflow-y-hidden"),this.resetOnClose&&(this.editableMenuItem=a.cloneDeep(this.defaultMenuItem)))}catch(n){console.error(n)}}},watch:{menuItem:{handler:"onMenuItemChange",deep:!0},showModal:{handler:"onShowModal"}}};var f=function(){var e=this,t=e._self._c;return e.showModal?t("transition",{attrs:{name:"fade"}},[t("div",{staticClass:"absolute bg-gray-800 bg-opacity-75 flex h-full inset-0 items-center justify-center w-full p-4 z-30",on:{keypress:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:(s.preventDefault(),s.stopPropagation(),e.confirmAction(!1))}}},[t("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.closeModal,expression:"closeModal"}],staticClass:"bg-theme-card max-h-full max-w-full overflow-y-auto relative rounded shadow-md text-theme-card-contrast w-160"},[t("div",{staticClass:"flex flex-row justify-end p-2"},[t("button",{staticClass:"flex items-center justify-center ml-auto p-1 rounded ease-in-out duration-300 transition-colors focus:outline-none focus:ring focus:ring-primary hover:bg-theme-base-subtle",attrs:{type:"button"},on:{click:e.closeModal}},[t("icon-close",{staticClass:"h-5 w-5"})],1)]),t("div",{staticClass:"px-4"},[t("h2",{staticClass:"font-semibold text-center text-lg"},[e._v(" "+e._s(e.headerText)+"s ")]),e.editableMenuItem?t("div",{staticClass:"mt-6"},[t("input-group",{attrs:{"input-autofocus":!0,"input-id":"menu_item_label","input-name":"menu_item_label","input-placeholder":"Label","label-text":"Label"},model:{value:e.editableMenuItem.label,callback:function(s){e.$set(e.editableMenuItem,"label",s)},expression:"editableMenuItem.label"}}),t("input-group",{staticClass:"mt-4",attrs:{"input-id":"menu_item_href","input-name":"menu_item_href","input-placeholder":"URL/Href","label-text":"URL/Href"},model:{value:e.editableMenuItem.href,callback:function(s){e.$set(e.editableMenuItem,"href",s)},expression:"editableMenuItem.href"}}),t("input-group",{staticClass:"mt-4",attrs:{"input-id":"menu_item_custom_class","input-name":"menu_item_custom_class","input-placeholder":"Custom Class","label-text":"Custom Class"},model:{value:e.editableMenuItem.custom_class,callback:function(s){e.$set(e.editableMenuItem,"custom_class",s)},expression:"editableMenuItem.custom_class"}}),t("input-group",{staticClass:"mt-4",attrs:{"input-id":"menu_item_target","input-name":"menu_item_target","input-placeholder":"Target","label-text":"Target"},model:{value:e.editableMenuItem.target,callback:function(s){e.$set(e.editableMenuItem,"target",s)},expression:"editableMenuItem.target"}}),t("input-group",{staticClass:"mt-4",attrs:{"input-id":"menu_item_rel","input-name":"menu_item_rel","input-placeholder":"Rel","label-text":"Rel"},model:{value:e.editableMenuItem.rel,callback:function(s){e.$set(e.editableMenuItem,"rel",s)},expression:"editableMenuItem.rel"}})],1):e._e()]),t("div",{staticClass:"flex flex-col items-center justify-end mb-4 mt-8 px-4 space-y-2 sm:flex-row sm:space-x-3 sm:space-y-0"},[t("button",{staticClass:"bg-theme-base-subtle min-w-24 px-4 py-2 rounded text-center text-theme-base-subtle-contrast w-full ease-in-out duration-300 transition-colors sm:w-auto focus:outline-none focus:ring focus:ring-primary hover:bg-theme-base-subtle-contrast hover:text-theme-base-subtle",attrs:{type:"button"},on:{click:e.cancelAction}},[e._v(" Cancel ")]),t("button",{staticClass:"bg-theme-primary border border-theme-primary flex flex-row items-center justify-center px-4 py-2 min-w-24 px-4 py-2 rounded text-center text-theme-primary-contrast w-full ease-in-out duration-300 transition-colors sm:w-auto focus:outline-none focus:ring focus:ring-primary hover:bg-theme-primary-hover hover:border-theme-primary-hover hover:text-theme-primary-hover-contrast",attrs:{disabled:!e.isMenuItemValid,type:"button"},on:{click:e.confirmAction}},[e._v(" "+e._s(e.confirmText)+" ")])])])])]):e._e()},p=[],b=i(h,f,p,!1,null,null,null,null);const r=b.exports;const g={name:"MenuItemDraggable",components:{ConfirmationModal:c,draggable:u,MenuItemModal:r},props:{menuItems:{required:!0,type:Array}},data(){return{isDragging:!1,isEditingMenuItem:!1,menuItemIndexToDelete:null,menuItemIndexToEdit:null,showDeleteModal:!1,showEditModal:!1}},computed:{deleteModalText(){try{return"Do you really want to delete the '"+this.menuItemToDelete.label+"' menu item?"}catch{return"Do you really want to delete this menu item?"}},isMenuItems(){try{return this.menuItems.length}catch{return!1}},menuItemToDelete(){try{return this.menuItems[this.menuItemIndexToDelete]}catch{return!1}},menuItemToEdit(){try{return this.isEditingMenuItem?this.menuItems[this.menuItemIndexToEdit]:{}}catch{return{}}}},methods:{addMenuItem(n){this.isEditingMenuItem=!1,this.showEditModal=!0,this.menuItemIndexToEdit=n},cancelDelete(){this.showDeleteModal=!1,this.menuItemIndexToDelete=null},cancelEdit(){this.showEditModal=!1,this.menuItemIndexToEdit=!1},checkDelete(n){this.menuItemIndexToDelete=n,this.showDeleteModal=!0},confirmEdit(n){this.isEditingMenuItem?this.$set(this.menuItems,this.menuItemIndexToEdit,a.cloneDeep(n)):this.menuItems[this.menuItemIndexToEdit].child_items.push(a.cloneDeep(n)),this.showEditModal=!1,this.isEditingMenuItem=!1,this.menuItemIndexToEdit=!1},confirmDelete(){try{this.$delete(this.menuItems,this.menuItemIndexToDelete)}catch(n){this.$errorToast("Failed to delete menu item."),console.log(n)}finally{this.showDeleteModal=!1,this.menuItemIndexToDelete=null}},editMenuItem(n){this.menuItemIndexToEdit=n,this.isEditingMenuItem=!0,this.showEditModal=!0},onDraggableEnd(){this.isDragging=!1},onDraggableSort(){this.$page.props.errors={}},onDraggableStart(){this.isDragging=!0}}};var I=function(){var e=this,t=e._self._c;return t("div",[t("draggable",{attrs:{animation:"200","ghost-class":"ghost",group:{name:"menu-item-draggable"},handle:".draggable-handle",list:e.menuItems},on:{end:e.onDraggableEnd,sort:e.onDraggableSort,start:e.onDraggableStart}},e._l(e.menuItems,function(s,l){return t("div",{key:`menu-item-${l}`},[t("div",{staticClass:"border-2 border-theme-base-subtle flex flex-row items-center px-4 py-1 rounded"},[t("div",{staticClass:"draggable-handle cursor-move"},[t("icon-grid-dots",{staticClass:"w-5"})],1),t("span",{staticClass:"font-semibold ml-4 mr-auto"},[e._v(" "+e._s(s.label)+" ")]),t("button",{staticClass:"flex flex-row items-center inline-flex mx-1 px-2 py-1 rounded text-theme-base-subtle-contrast text-sm tracking-wide focus:outline-none focus:ring hover:bg-theme-primary-subtle hover:text-theme-primary-subtle-contrast",attrs:{title:"Add Child Menu Item",type:"button"},on:{click:function(o){return e.addMenuItem(l)}}},[t("icon-plus",{staticClass:"w-4"})],1),t("button",{staticClass:"flex flex-row items-center inline-flex mx-1 px-2 py-1 rounded text-theme-base-subtle-contrast text-sm tracking-wide focus:outline-none focus:ring hover:bg-theme-info hover:text-theme-info-contrast",attrs:{title:"Edit Menu Item",type:"button"},on:{click:function(o){return e.editMenuItem(l)}}},[t("icon-edit",{staticClass:"w-4"})],1),t("button",{staticClass:"flex flex-row items-center inline-flex mx-1 px-2 py-1 rounded text-theme-base-subtle-contrast text-sm tracking-wide focus:outline-none focus:ring hover:bg-theme-danger hover:text-theme-danger-contrast",attrs:{title:"Delete Menu Item",type:"button"},on:{click:function(o){return e.checkDelete(l)}}},[t("icon-trash",{staticClass:"w-4"})],1)]),t("div",[t("menu-item-draggable",{staticClass:"inner-draggable pl-4",class:{"mt-4":s.child_items.length},attrs:{"menu-items":s.child_items}})],1)])}),0),t("confirmation-modal",{attrs:{"confirm-text":"Delete","confirm-type":"danger","show-modal":e.showDeleteModal,"message-text":e.deleteModalText},on:{cancelAction:e.cancelDelete,closeModal:e.cancelDelete,confirmAction:e.confirmDelete}}),t("menu-item-modal",{attrs:{"is-create":!e.isEditingMenuItem,"menu-item":e.menuItemToEdit,"show-modal":e.showEditModal},on:{cancelAction:e.cancelEdit,closeModal:e.cancelEdit,confirmAction:e.confirmEdit}})],1)},M=[],x=i(g,I,M,!1,null,"86ad800b",null,null);const _=x.exports,v={name:"MenuItemsEditor",components:{MenuItemDraggable:_,MenuItemModal:r},model:{prop:"menuItems"},props:{menuItems:{required:!0,type:Array}},data(){return{isDragging:!1,newMenuItem:{},showCreateModal:!1}},methods:{addMenuItem(){this.showCreateModal=!0},cancelCreate(){this.showCreateModal=!1},confirmCreate(n){this.showCreateModal=!1,this.menuItems.push(a.cloneDeep(n)),this.newMenuItem={}}}};var y=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"flex flex-row items-center"},[t("span",{staticClass:"text-lg"},[e._v("Menu Items")]),t("button",{staticClass:"button button-primary-subtle button-small ml-auto text-sm",attrs:{type:"button"},on:{click:e.addMenuItem}},[e._v(" Add Menu Item ")])]),e.menuItems.length?t("div",[t("menu-item-draggable",{staticClass:"mt-6",attrs:{"menu-items":e.menuItems}})],1):t("p",{staticClass:"bg-theme-base-subtle mt-6 px-4 py-3 rounded text-center text-theme-base-subtle-contrast"},[e._v(" No template fields ")]),t("menu-item-modal",{attrs:{"menu-item":e.newMenuItem,"show-modal":e.showCreateModal},on:{cancelAction:e.cancelCreate,closeModal:e.cancelCreate,confirmAction:e.confirmCreate}})],1)},w=[],C=i(v,y,w,!1,null,null,null,null);const A=C.exports;export{A as M};
