(self.webpackChunk=self.webpackChunk||[]).push([[510],{952:(t,e,n)=>{"use strict";n.d(e,{S:()=>i});var i={model:{prop:"inputValue"},props:{errorClass:{default:"mt-1 text-red-500 text-sm",type:String},errorHideOnInput:{default:!0,type:Boolean},errorMessage:{default:"",type:String},inputAutofocus:{default:!1,type:Boolean},inputClass:{default:"border border-theme-base-subtle font-medium px-3 py-2 rounded w-full focus:border-theme-primary focus:outline-none focus:ring-0",type:String},inputDisabled:{default:!1,type:Boolean},inputId:{required:!0,type:String},inputName:{required:!0,type:String},inputRequired:{default:!1,type:Boolean},inputValue:{default:"",type:String|Number},inputWrapperClass:{default:"",type:String},labelClass:{default:"font-medium mb-2 text-theme-base-contrast text-sm tracking-wider",type:String},labelHidden:{default:!1,type:Boolean},labelText:{required:!0,type:String}},data:function(){return{hideError:!1}},computed:{formattedInputClass:function(){return this.isError?this.inputClass+" error":this.inputClass},formattedLabelClass:function(){var t=this.labelClass;return this.labelHidden&&(t+=" hidden"),t},isError:function(){return!(this.hideError||!this.errorMessage||""===this.errorMessage)}},methods:{autofocus:function(){var t=this;this.inputAutofocus&&this.$refs[this.inputId]&&this.$nextTick((function(){t.$refs[t.inputId].focus()}))},blurInput:function(){var t=this;this.$refs[this.inputId]&&this.$nextTick((function(){t.$refs[t.inputId].blur()}))},onErrorMessageChange:function(){this.hideError=!1},onInput:function(){this.$emit("input",this.$refs[this.inputId].value),this.errorHideOnInput&&(this.hideError=!0)},onInputBlur:function(){this.$emit("blur")}},watch:{errorMessage:{handler:"onErrorMessageChange"}}}},7442:(t,e,n)=>{"use strict";n.d(e,{Z:()=>q});var i=n(6486),r=n.n(i),o={model:{prop:"content"},props:{content:{required:!0},templateField:{required:!0,type:Object}},data:function(){return{editableContent:""}},computed:{errorMessage:function(){try{return Array.isArray(this.inputErrors)?this.inputErrors[0]:this.inputErrors}catch(t){return!1}},inputErrors:function(){var t=this;try{var e=[];return r().forEach(this.$page.props.errors,(function(n,i){0===i.indexOf(t.inputName)&&(n=r().replace(n,t.inputName+".",""),n=r().replace(n,t.inputName,""),e.push(n))})),e}catch(t){return!1}},inputName:function(){return"content."+this.templateField.id}},created:function(){this.editableContent=r().cloneDeep(this.content)},methods:{onEditableContentUpdate:r().debounce((function(){this.$emit("input",this.editableContent)}),100)},watch:{editableContent:{deep:!0,handler:"onEditableContentUpdate"}}};const a={name:"CmsMenuField",mixins:[o],components:{SelectGroup:n(8271).Z},data:function(){return{isLoadingMenuItems:!1,menuItems:[]}},computed:{isMenuItems:function(){try{return Array.isArray(this.menuItems)&&this.menuItems.length}catch(t){return!1}}},created:function(){this.editableContent=this.content,this.getMenuItems()},methods:{getMenuItems:function(){var t=this;this.isLoadingMenuItems=!0,axios.get(this.$route("admin.api.cms.menus.index")).then((function(e){t.menuItems=e.data.data})).catch((function(e){t.$errorToast("Failed to load menu items")})).finally((function(){t.isLoadingMenuItems=!1}))}}};var s=n(1900);const l=(0,s.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoadingMenuItems?n("div",[t._t("default"),t._v(" "),n("span",{staticClass:"flex items-center"},[n("icon-loader-circle",{staticClass:"animate-spin-slow mr-2 w-5"}),t._v(" "),n("span",[t._v("Loading")])],1)],2):n("div",[n("select-group",{attrs:{"error-message":t.errorMessage,"input-any-option-enabled":!0,"input-any-option-label":"Please select a menu","input-autocomplete":t.inputName,"input-id":t.inputName,"input-name":t.inputName,"input-option-label-key":"name","input-option-value-key":"id","input-options":t.menuItems,"input-required":t.templateField.is_required,"label-class":"","label-text":""},model:{value:t.editableContent,callback:function(e){t.editableContent=e},expression:"editableContent"}},[t._t("default")],2)],1)}),[],!1,null,null,null).exports;var u=n(3764);const p={name:"ImageField",mixins:[o],components:{InputGroup:u.Z},methods:{onFileManagerFileSelected:function(t){try{this.editableContent=t.url}catch(t){this.$errorToast(t)}},openFileManagerModal:function(){this.$store.commit("openFileManagerModel",this.onFileManagerFileSelected)}}};const d=(0,s.Z)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input-group",{attrs:{"error-message":t.errorMessage,"input-autocomplete":t.inputName,"input-class":"border border-theme-base-subtle font-medium px-3 py-2 rounded-l w-full focus:border-theme-primary focus:outline-none focus:ring-0","input-id":t.inputName,"input-name":t.inputName,"input-required":t.templateField.is_required,"input-type":"text","input-wrapper-class":"flex flex-row items-center","label-class":"","label-text":""},scopedSlots:t._u([{key:"default",fn:function(){return[t._t("default")]},proxy:!0},{key:"inputAppend",fn:function(){return[n("button",{staticClass:"border border-l-0 border-theme-primary-subtle button button-primary-subtle rounded-l-none",attrs:{type:"button"},on:{click:t.openFileManagerModal}},[t._v("\n                Browse...\n            ")])]},proxy:!0}],null,!0),model:{value:t.editableContent,callback:function(e){t.editableContent=e},expression:"editableContent"}})],1)}),[],!1,null,null,null).exports;const c={name:"NumberField",mixins:[o],components:{InputGroup:u.Z},computed:{inputMax:function(){try{return this.templateField.settings.max}catch(t){return""}},inputMin:function(){try{return this.templateField.settings.min}catch(t){return""}}}};const m=(0,s.Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input-group",{attrs:{"error-message":t.errorMessage,"input-autocomplete":t.inputName,"input-id":t.inputName,"input-max":t.inputMax,"input-min":t.inputMin,"input-name":t.inputName,"input-required":t.templateField.is_required,"input-type":"number","label-class":"","label-text":""},model:{value:t.editableContent,callback:function(e){t.editableContent=e},expression:"editableContent"}},[t._t("default")],2)],1)}),[],!1,null,null,null).exports;var f=n(952),h=n(1147);const g={name:"TextAreaGroup",mixins:[f.S],components:{FormFieldError:h.Z},props:{inputAutocomplete:{default:"",type:String},inputMaxLength:{default:"",type:String|Number},inputPlaceholder:{default:"",type:String},inputRows:{default:"",type:String|Number},inputType:{default:"text",type:String}},mounted:function(){this.autofocus()}};const y={name:"TextAreaField",mixins:[o],components:{TextAreaGroup:(0,s.Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{class:t.formattedLabelClass,attrs:{for:t.inputId}},[t._t("default",[n("span",{staticClass:"flex flex-row items-baseline"},[n("span",[t._v(t._s(t.labelText))]),t._v(" "),t.inputRequired?n("sup",{staticClass:"text-theme-danger-contrast"},[t._v("\n                    *\n                ")]):t._e()])])],2),t._v(" "),n("textarea",{ref:t.inputId,class:t.formattedInputClass,attrs:{id:t.inputId,autocomplete:t.inputAutocomplete,disabled:t.inputDisabled,maxlength:t.inputMaxLength,name:t.inputName,rows:t.inputRows,placeholder:t.inputPlaceholder,required:t.inputRequired,type:t.inputType},domProps:{value:t.inputValue},on:{blur:t.onInputBlur,input:t.onInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.blurInput(e)}}}),t._v(" "),n("form-field-error",{attrs:{"error-class":t.errorClass,"error-message":t.errorMessage,"is-error":t.isError}})],1)}),[],!1,null,null,null).exports},computed:{inputMaxLength:function(){try{return this.templateField.settings.max_length}catch(t){return""}},inputRows:function(){try{return this.templateField.settings.rows}catch(t){return""}}}};const b=(0,s.Z)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("text-area-group",{attrs:{"error-message":t.errorMessage,"input-autocomplete":t.inputName,"input-id":t.inputName,"input-max-length":t.inputMaxLength,"input-name":t.inputName,"input-required":t.templateField.is_required,"input-rows":t.inputRows,"input-type":"text","label-class":"","label-text":""},model:{value:t.editableContent,callback:function(e){t.editableContent=e},expression:"editableContent"}},[t._t("default")],2)],1)}),[],!1,null,null,null).exports;const v={name:"TextField",mixins:[o],components:{InputGroup:u.Z},computed:{inputMaxLength:function(){try{return this.templateField.settings.max_length}catch(t){return""}}}};const C=(0,s.Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input-group",{attrs:{"error-message":t.errorMessage,"input-autocomplete":t.inputName,"input-id":t.inputName,"input-max-length":t.inputMaxLength,"input-name":t.inputName,"input-required":t.templateField.is_required,"input-type":"text","label-class":"","label-text":""},model:{value:t.editableContent,callback:function(e){t.editableContent=e},expression:"editableContent"}},[t._t("default")],2)],1)}),[],!1,null,null,null).exports;var x,_=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],S=function(t){return-1!==_.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},I=function(t,e,n){var i=e.$props.value?e.$props.value:"",r=e.$props.initialValue?e.$props.initialValue:"";n.setContent(i||(e.initialized?e.cache:r)),e.$watch("value",(function(t,i){n&&"string"==typeof t&&t!==i&&t!==n.getContent({format:e.$props.outputFormat})&&n.setContent(t)})),e.$listeners.input&&function(t,e){var n=t.$props.modelEvents?t.$props.modelEvents:null,i=Array.isArray(n)?n.join(" "):n;e.on(i||"change input undo redo",(function(){t.$emit("input",e.getContent({format:t.$props.outputFormat}))}))}(e,n),function(t,e,n){Object.keys(e).filter(S).forEach((function(i){var r=e[i];"function"==typeof r&&("onInit"===i?r(t,n):n.on(i.substring(2),(function(t){return r(t,n)})))}))}(t,e.$listeners,n),e.initialized=!0},E=0,$=function(t){var e=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++E+String(e)},F=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},M=function(){return{listeners:[],scriptId:$("tiny-script"),scriptLoaded:!1}},k=(x=M(),{load:function(t,e,n){x.scriptLoaded?n():(x.listeners.push(n),t.getElementById(x.scriptId)||function(t,e,n,i){var r=e.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=t,r.src=n;var o=function(){r.removeEventListener("load",o),i()};r.addEventListener("load",o),e.head&&e.head.appendChild(r)}(x.scriptId,t,e,(function(){x.listeners.forEach((function(t){return t()})),x.scriptLoaded=!0})))},reinitialize:function(){x=M()}}),w=function(){var t="undefined"!=typeof window?window:n.g;return t&&t.tinymce?t.tinymce:null},O={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},T=function(){return(T=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},D=function(t){return function(){var e,n,i,r=T(T({},t.$props.init),{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:(e=t.$props.init&&t.$props.init.plugins,n=t.$props.plugins,F(e).concat(F(n))),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",(function(n){return I(n,t,e)})),t.$props.init&&"function"==typeof t.$props.init.setup&&t.$props.init.setup(e)}});null!==(i=t.element)&&"textarea"===i.tagName.toLowerCase()&&(t.element.style.visibility="",t.element.style.display=""),w().init(r)}};const A={name:"WysiwygField",mixins:[o],components:{editor:{props:O,created:function(){this.elementId=this.$props.id||$("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==w())D(this)();else if(this.element&&this.element.ownerDocument){var t=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=null==this.$props.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":this.$props.tinymceScriptSrc;k.load(this.element.ownerDocument,n,D(this))}},beforeDestroy:function(){null!==w()&&w().remove(this.editor)},deactivated:function(){var t;this.inlineEditor||(this.cache=this.editor.getContent(),null===(t=w())||void 0===t||t.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&D(this)()},render:function(t){return this.inlineEditor?function(t,e,n){return t(n||"div",{attrs:{id:e}})}(t,this.elementId,this.$props.tagName):function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})}(t,this.elementId)}}},data:function(){return{editorFilePickerCallback:null}},computed:{editorConfig:function(){return{content_css:"/css/app.css",file_picker_callback:this.onEditorFilePicker,formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"text-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"text-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"text-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"text-justify"},bold:{inline:"strong",classes:"font-bold"},italic:{inline:"em",classes:"italic"},underline:{inline:"span",classes:"underline"},strikethrough:{inline:"span",classes:"line-through"}},min_height:300,plugins:"code fullscreen image",skin:"TVI",skin_url:"/vendor/tinymce/skins/tvi",toolbar:"fullscreen code styleselect bold italic alignleft aligncenter alignright image"}}},beforeDestroy:function(){this.$refs.editor.editor.destroy()},methods:{onEditorFilePicker:function(t,e,n){this.editorFilePickerCallback=t,this.$store.commit("openFileManagerModel",this.onFileManagerFileSelected)},onFileManagerFileSelected:function(t){try{this.editorFilePickerCallback(t.url,{alt:t.meta.filename?t.meta.filename:""}),this.editorFilePickerCallback=null}catch(t){this.$errorToast(t)}}}};function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const N={name:"AdminCmsContentEditor",components:{CmsMenuField:l,ImageField:d,NumberField:m,TextAreaField:b,TextField:C,WysiwygField:(0,s.Z)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default"),t._v(" "),n("editor",{ref:"editor",attrs:{"api-key":"yjslf080227w394afqv4gkul5yer7sxjorf08kvjgztc1n0i",init:t.editorConfig},model:{value:t.editableContent,callback:function(e){t.editableContent=e},expression:"editableContent"}})],2)}),[],!1,null,null,null).exports},model:{prop:"content"},props:{content:{required:!0,type:Array|Object},content_field_slug:{default:"content",type:String},templateFields:{required:!0,type:Array}},data:function(){return{editableContent:{}}},created:function(){"object"===L(this.content)&&Object.keys(this.content).length>0&&(this.editableContent=r().cloneDeep(this.content))},methods:{getContentFieldComponent:function(t){switch(t.type){case"cms_menu":return"CmsMenuField";case"image":return"ImageField";case"number":return"NumberField";case"text":return"TextField";case"textarea":return"TextAreaField";case"wysiwyg":return"WysiwygField";default:return this.$errorToast("Unregistered content field for template field: "+t.type),!1}},onEditableContentUpdate:function(){this.$emit("input",r().cloneDeep(this.editableContent))}}};const q=(0,s.Z)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col space-y-4"},[t.getPageErrorMessage(t.content_field_slug)?n("p",{staticClass:"text-theme-danger-contrast"},[t._v("\n        "+t._s(t.getPageErrorMessage(t.content_field_slug))+"\n    ")]):t._e(),t._v(" "),t._l(t.templateFields,(function(e){return n("div",{key:e.id},[n(t.getContentFieldComponent(e),{tag:"component",attrs:{"template-field":e},on:{input:t.onEditableContentUpdate},model:{value:t.editableContent[e.id].data,callback:function(n){t.$set(t.editableContent[e.id],"data",n)},expression:"editableContent[templateField.id].data"}},[n("div",{staticClass:"mb-2"},[n("p",{staticClass:"flex flex-row font-medium items-baseline text-theme-base-contrast text-sm tracking-wider"},[n("span",[t._v(t._s(e.name))]),t._v(" "),e.is_required?n("sup",{staticClass:"text-theme-danger-contrast"},[t._v("\n                        *\n                    ")]):t._e()]),t._v(" "),e.description?n("p",{staticClass:"text-sm text-theme-base-subtle-contrast"},[t._v("\n                    "+t._s(e.description)+"\n                ")]):t._e()])])],1)}))],2)}),[],!1,null,null,null).exports},3764:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(952),r=n(1147);const o={name:"InputGroup",mixins:[i.S],components:{FormFieldError:r.Z},props:{inputAutocomplete:{default:"",type:String},inputMax:{default:"",type:String|Number},inputMaxLength:{default:"",type:String|Number},inputMin:{default:"",type:String|Number},inputMinLength:{default:"",type:String|Number},inputPlaceholder:{default:"",type:String},inputType:{default:"text",type:String}},mounted:function(){this.autofocus()}};const a=(0,n(1900).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{class:t.formattedLabelClass,attrs:{for:t.inputId}},[t._t("default",[n("span",{staticClass:"flex flex-row items-baseline"},[n("span",[t._v(t._s(t.labelText))]),t._v(" "),t.inputRequired?n("sup",{staticClass:"text-theme-danger-contrast"},[t._v("\n                    *\n                ")]):t._e()])])],2),t._v(" "),n("div",{class:t.inputWrapperClass},[t._t("inputPrepend"),t._v(" "),n("input",{ref:t.inputId,class:t.formattedInputClass,attrs:{id:t.inputId,autocomplete:t.inputAutocomplete,disabled:t.inputDisabled,max:t.inputMax,maxlength:t.inputMaxLength,min:t.inputMin,minlength:t.inputMinLength,name:t.inputName,placeholder:t.inputPlaceholder,required:t.inputRequired,type:t.inputType},domProps:{value:t.inputValue},on:{blur:t.onInputBlur,input:t.onInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.blurInput(e)}}}),t._v(" "),t._t("inputAppend")],2),t._v(" "),n("form-field-error",{attrs:{"error-class":t.errorClass,"error-message":t.errorMessage,"is-error":t.isError}})],1)}),[],!1,null,null,null).exports},8271:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(6486),r=n.n(i),o=n(952),a=n(1147);const s={name:"SelectGroup",mixins:[o.S],components:{FormFieldError:a.Z},props:{inputAnyOptionEnabled:{default:!1,type:Boolean},inputAnyOptionLabel:{default:"Any",type:String},inputAnyOptionClass:{default:"",type:String},inputAnyOptionValue:{default:""},inputClass:{default:"border border-theme-base-subtle cursor-pointer font-medium form-select px-3 py-2 rounded w-full focus:border-theme-primary focus:outline-none focus:ring-0 focus:shadow-none",type:String},inputOptionExact:{default:!1,type:Boolean},inputOptionLabelKey:{default:!1,type:Boolean|String|Number},inputOptionValueKey:{default:!1,type:Boolean|String|Number},inputOptions:{required:!0,type:Array|Object}},computed:{formattedOptions:function(){var t=this,e={};return r().forEach(this.inputOptions,(function(n,i){var r=n,o=i;!1!==t.inputOptionLabelKey&&n.hasOwnProperty(t.inputOptionLabelKey)&&(r=n[t.inputOptionLabelKey]),!1!==t.inputOptionValueKey&&n.hasOwnProperty(t.inputOptionValueKey)&&(o=n[t.inputOptionValueKey]),e[i]={label:r,value:o}})),e},formattedInputClass:function(){var t=this.inputClass;return this.isError&&(t+=" error"),this.isAnyOptionSelected&&(t+=" "+this.inputAnyOptionClass),t},isAnyOptionSelected:function(){return this.inputValue===this.inputAnyOptionValue||null===this.inputValue}},mounted:function(){this.autofocus()},methods:{isOptionDisabled:function(t){return!!this.inputRequired&&""===t},isOptionSelected:function(t){return this.inputOptionExact?t===this.inputValue:t==this.inputValue}}};const l=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("label",{class:t.formattedLabelClass,attrs:{for:t.inputId}},[t._t("default",[n("span",{staticClass:"flex flex-row items-baseline"},[n("span",[t._v(t._s(t.labelText))]),t._v(" "),t.inputRequired?n("sup",{staticClass:"text-theme-danger-contrast"},[t._v("\n                    *\n                ")]):t._e()])])],2),t._v(" "),n("select",{ref:t.inputId,class:t.formattedInputClass,attrs:{id:t.inputId,disabled:t.inputDisabled,name:t.inputName,required:t.inputRequired},on:{change:t.onInput,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.blurInput(e)}}},[t.inputAnyOptionEnabled?n("option",{attrs:{disabled:t.isOptionDisabled(t.inputAnyOptionValue)},domProps:{selected:t.isOptionSelected(t.inputAnyOptionValue),value:t.inputAnyOptionValue}},[t._v("\n            "+t._s(t.inputAnyOptionLabel)+"\n        ")]):t._e(),t._v(" "),t._l(t.formattedOptions,(function(e,i){return n("option",{key:t.inputId+"-option-"+e.value,attrs:{disabled:t.isOptionDisabled(e.value)},domProps:{selected:t.isOptionSelected(e.value),value:e.value}},[t._v("\n            "+t._s(e.label)+"\n        ")])}))],2),t._v(" "),n("form-field-error",{attrs:{"error-class":t.errorClass,"error-message":t.errorMessage,"is-error":t.isError}})],1)}),[],!1,null,null,null).exports},1147:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const i={name:"FormFieldError",props:{errorClass:{required:!0,type:String},errorMessage:{required:!0,type:String},isError:{required:!0,type:Boolean},transitionName:{default:"slide-down-fade",type:String}}};const r=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("transition",{attrs:{name:t.transitionName}},[t.isError?n("p",{class:t.errorClass},[t._v("\n            "+t._s(t.errorMessage)+"\n        ")]):t._e()])],1)}),[],!1,null,null,null).exports},3510:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var i=n(6486),r=n.n(i),o=n(1304),a=n.n(o),s=n(7442),l=n(3764),u=n(8271),p=axios.CancelToken,d=p.source();const c={name:"AdminCmsLayoutCreate",components:{ContentEditor:s.Z,InputGroup:l.Z,SelectGroup:u.Z},layout:"admin-layout",props:{layout:{type:Object,required:!0},templates:{type:Object,required:!0}},data:function(){return{autoUpdateSlug:!1,formData:{},isInitialisedTemplate:!1,isInitialisedContent:!1,isLoadingTemplate:!1,selectedTemplate:null}},computed:{selectedTemplateHasFields:function(){try{return!!this.selectedTemplate&&this.selectedTemplate.template_fields.length}catch(t){return!1}},selectedTemplateId:function(){var t;return null!==(t=this.formData.template_id)&&void 0!==t?t:""}},created:function(){this.formData={content:{},id:this.layout.id,name:this.layout.name,slug:this.layout.slug,template_id:this.layout.template_id},this.selectedTemplate=r().cloneDeep(this.layout.template),this.setInitialContent()},methods:{cancelLoadTemplate:function(){this.isLoadingTemplate&&(d.cancel("Template load cancelled"),d=p.source())},doesObjectHaveKeys:function(t){try{return Object.keys(t).length}catch(t){return!1}},layoutHasContentField:function(t){try{return this.layout.content.hasOwnProperty(t)}catch(t){return!1}},onNameInput:function(){this.autoUpdateSlug&&(this.formData.slug=this.slugify(this.formData.name))},onSelectedTemplateIdChange:r().debounce((function(){var t=this;this.isInitialisedTemplate?(this.selectedTemplate=null,this.cancelLoadTemplate(),this.selectedTemplateId&&(this.isLoadingTemplate=!0,axios.get(this.$route("admin.api.cms.templates.index",this.selectedTemplateId)).then((function(e){t.selectedTemplate=r().cloneDeep(e.data.data),t.setNewTemplateContent()})).catch((function(e){axios.isCancel(e)||(t.$errorToast("Failed to load selected template"),console.log(e))})).finally((function(){t.isLoadingTemplate=!1})))):this.isInitialisedTemplate=!0}),500),onSlugBlur:function(){this.formData.slug=this.slugify(this.formData.slug)},onSlugInput:function(){this.autoUpdateSlug=!1},setInitialContent:function(){var t=this,e={};this.doesObjectHaveKeys(this.layout.content)&&(e=r().cloneDeep(this.layout.content)),r().forEach(this.selectedTemplate.template_fields,(function(n){t.layoutHasContentField(n.id)||(e[n.id]={data:"",template_field_id:n.id})})),this.formData.content=r().cloneDeep(e),this.isInitialisedContent=!0},setNewTemplateContent:function(){this.selectedTemplateHasFields||(this.formData.content={});var t={};r().forEach(this.selectedTemplate.template_fields,(function(e){t[e.id]={data:"",template_field_id:e.id}})),this.$set(this.formData,"content",r().cloneDeep(t))},slugify:function(t){return t&&t.length?a()(t,{lower:!0}):""},submit:function(){this.$inertia.put(this.$route("admin.cms.layouts.update",this.layout.id),this.formData)}},watch:{selectedTemplateId:{handler:"onSelectedTemplateIdChange"}}};const m=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"max-w-5xl mx-auto",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.userCan("cms_advanced.edit")?n("div",{staticClass:"flex flex-row items-center mb-6"},[n("h1",{staticClass:"font-medium mr-auto text-lg"},[t._v("\n            Edit Layout\n        ")]),t._v(" "),t.userCan("cms_advanced.view")?n("inertia-link",{staticClass:"\n                button button-default-responsive button-primary-subtle\n                flex flex-row items-center mr-2\n            ",attrs:{href:t.$route("admin.cms.layouts.index")}},[n("icon-chevron-left",{staticClass:"w-5 md:mr-2"}),t._v(" "),n("span",{staticClass:"hidden md:inline"},[t._v("\n                Back\n            ")])],1):t._e(),t._v(" "),n("button",{staticClass:"\n                button button-default-responsive button-primary\n                flex flex-row items-center\n            ",attrs:{type:"submit"}},[n("icon-save",{staticClass:"w-5 md:mr-2"}),t._v(" "),n("span",{staticClass:"hidden md:inline"},[t._v("\n                Save Changes\n            ")])],1)],1):t._e(),t._v(" "),n("div",{staticClass:"bg-white py-6 shadow-subtle rounded-lg"},[n("div",{staticClass:"block px-6 w-full"},[n("select-group",{attrs:{"error-message":t.getPageErrorMessage("template_id"),"label-text":"Template","input-any-option-enabled":!0,"input-any-option-label":"Please select a template","input-autofocus":!0,"input-id":"template_id","input-name":"template_id","input-options":t.templates,"input-option-label-key":"name","input-option-value-key":"id","input-required":!0},model:{value:t.formData.template_id,callback:function(e){t.$set(t.formData,"template_id",e)},expression:"formData.template_id"}}),t._v(" "),n("input-group",{staticClass:"mt-4",attrs:{"error-message":t.getPageErrorMessage("name"),"input-autocomplete":"layout_name","input-id":"name","input-name":"name","input-required":!0,"input-type":"text","label-text":"Layout Name"},on:{input:t.onNameInput},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),t._v(" "),n("input-group",{staticClass:"mt-4",attrs:{"error-message":t.getPageErrorMessage("slug"),"input-autocomplete":"layout_slug","input-id":"slug","input-name":"slug","input-required":!0,"input-type":"text","label-text":"Layout Slug"},on:{blur:t.onSlugBlur,input:t.onSlugInput},model:{value:t.formData.slug,callback:function(e){t.$set(t.formData,"slug",e)},expression:"formData.slug"}})],1)]),t._v(" "),!this.isLoadingTemplate&&t.selectedTemplateHasFields&&t.isInitialisedContent?n("div",{staticClass:"bg-white mt-6 px-4 py-6 shadow-subtle rounded-lg"},[n("p",{staticClass:"text-lg"},[t._v("Fields")]),t._v(" "),n("content-editor",{staticClass:"mt-4",attrs:{"template-fields":this.selectedTemplate.template_fields},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1):t._e()])}),[],!1,null,null,null).exports}}]);